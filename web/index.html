<!DOCTYPE html>

<html>

<head>
	<meta charset="UTF-8">
	<title>Title goes here</title>
	<meta name="description" content="Description of your site goes here">
	<meta name="keywords" content="keyword1, keyword2, keyword3">
	<link href="css/style.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
	<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
	<script src="js/search.js" type="text/javascript"></script>
	<script src="js/calendar.js" type="text/javascript"></script>

	<script>
	$(function() {
		$( "#search" ).autocomplete({
			appendTo: "#results",
			open: function() {
				var position = $("#results").position(),
					left = position.left, top = position.top;
				$("#results > ul").css({left: left + "px",
										top: top + 340 + "px" });

			},
			source: courseList,
			select: function ( event, ui ) {

				var value = ui.item.value;
				var index;
				for (var i = 0; i < courseList.length; i++) {
					if (courseList[i].value === ui.item.value) {
						index = i;
						break;
					}
				}
				
				//console.log(courseData[index].date);
				//console.log(value);
				
				getCourseDetails( index );
				
				
			}
		}).data( "ui-autocomplete" )._renderItem = function( ul, item ) {
			var date;
			if (item.date === '') {
				date = 'No exam';
			} else {
				var d = $.datepicker.parseDate("yy-mm-dd", item.date); 
				var datestrInNewFormat = $.datepicker.formatDate( "DD, MM dd, yy", d);
				date = datestrInNewFormat;
			}
			  return $( "<li>" )
				.append( '<a><span style="width:40%;float:left;">' + item.label + '</span><small style="width:60%;color:#aaa;">' + date + '</small></a>' )
				.appendTo( ul );
			};
	});
	
	</script>
	<script src="https://apis.google.com/js/client.js"></script>
</head>

<body onload="load()">
	<div id="main-wrapper">

		<div id="banner"> UWaterloo Exam Search </div>

		<div id="search-container">
			<input id="search" type="search" placeholder="eg: CS241, GENE 411, CO 487,..." value="">
		</div>

		<div id="results"></div>
		<div id="list">
		</div>
		<button id="authorize-button" onclick="handleClientLoad()">Add to Calendar</button>	
	</div>
</body>
</html>